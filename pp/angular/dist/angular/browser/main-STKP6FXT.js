import{a as V,b as A,c as W,d as D,e as F,f as z,g as H,h as re,i as B,j as g,k as G}from"./chunk-BZQQWSHT.js";import{A as x,C as T,D as ee,F as h,G as y,Ha as b,Ia as te,K as S,Ka as J,L as w,La as ne,Ma as oe,Na as ie,Oa as ae,Pa as se,Qa as q,Ra as C,S as l,Sa as le,T as u,Ta as K,Y as d,_ as p,ca as o,da as i,ea as M,h as Z,ha as L,ia as P,ja as f,p as $,pa as j,qa as a,s as k,sa as U,ta as O,ua as E,va as I,ya as R,z as N}from"./chunk-4QLRPULZ.js";var me=(()=>{let e=class e{constructor(){this.authService=ee(g)}intercept(r,n){let s=this.authService.user.token,c=r.url.startsWith(B.apiUrl);return s&&c&&(r=r.clone({setHeaders:{Authorization:`Bearer ${s}`}})),n.handle(r)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac});let t=e;return t})();var pe=(()=>{let e=class e{constructor(r){this.router=r}intercept(r,n){return n.handle(r).pipe($(s=>{s.status===401&&this.router.navigate(["login"],{queryParams:{returnUrl:this.router.routerState.snapshot.url}}),B.production||console.error(s);let c=s&&s.error&&s.error.message||s.statusText;return Z(()=>c)}))}};e.\u0275fac=function(n){return new(n||e)(T(q))},e.\u0275prov=N({token:e,factory:e.\u0275fac});let t=e;return t})();var ce=(()=>{let e=class e{constructor(r){if(r)throw new Error("Core Module can only be imported to AppModule.")}};e.\u0275fac=function(n){return new(n||e)(T(e,12))},e.\u0275mod=y({type:e}),e.\u0275inj=x({providers:[{provide:J,useClass:me,multi:!0},{provide:J,useClass:pe,multi:!0}],imports:[te]});let t=e;return t})();function Ce(t,e){if(t&1&&(o(0,"div",3)(1,"h4",4),a(2),i(),o(3,"div",5)(4,"div",6)(5,"h6"),a(6,"Your access token is"),i(),a(7),i(),o(8,"div",6)(9,"h6"),a(10,"Token expires at:"),i(),a(11),i()(),o(12,"div",7),a(13," To view all the events or add/manage events, please click the "),o(14,"a",8),a(15,"here"),i(),a(16,". "),i()()),t&2){let m=f();l(2),U("Hi ",m.user.username,","),l(5),U(" ",m.user.token," "),l(4),U(" ",m.expiry," ")}}function ve(t,e){t&1&&(o(0,"div",3)(1,"h4",4),a(2,"You have been logged out"),i(),o(3,"div",5)(4,"div",6),a(5," Please click "),o(6,"a",9),a(7,"here"),i(),a(8," to login. "),i()()())}var ue=(()=>{let e=class e{constructor(r){this.expiry=new Date,this.user=r.user;let n=this.user.token;if(n){let s=JSON.parse(atob(n.split(".")[1]));this.expiry=new Date(s.expires*1e3)}}ngOnInit(){}};e.\u0275fac=function(n){return new(n||e)(u(g))},e.\u0275cmp=h({type:e,selectors:[["app-home"]],decls:4,vars:2,consts:[["login",""],[1,"container"],["class","card mt-4 shadow",4,"ngIf","ngIfElse"],[1,"card","mt-4","shadow"],[1,"card-header"],[1,"card-body"],[1,"m-2"],[1,"card-footer","py-3","fs-5"],["routerLink","events"],["routerLink","login"]],template:function(n,s){if(n&1&&(o(0,"section",1),d(1,Ce,17,3,"div",2),i(),d(2,ve,9,0,"ng-template",null,0,R)),n&2){let c=j(3);l(),p("ngIf",s.user.username)("ngIfElse",c)}},dependencies:[b,C]});let t=e;return t})();function Me(t,e){t&1&&(o(0,"div",12),a(1," Login failed. Please try again. "),i())}var de=(()=>{let e=class e{constructor(r,n,s){this.route=r,this.router=n,this.authService=s,this.busy=!1,this.username="",this.password="",this.loginError=!1}ngOnInit(){if(this.authService.user.token){let r=this.route.snapshot.queryParams.returnUrl||"";this.router.navigate([r])}}login(){if(!this.username||!this.password)return;this.busy=!0;let r=this.route.snapshot.queryParams.returnUrl||"";this.authService.login(this.username.trim(),this.password).pipe(k(()=>this.busy=!1)).subscribe({next:()=>{this.router.navigate([r])},error:()=>{this.loginError=!0}})}};e.\u0275fac=function(n){return new(n||e)(u(ae),u(q),u(g))},e.\u0275cmp=h({type:e,selectors:[["app-login"]],decls:18,vars:4,consts:[[1,"text-center","mb-4"],["src","assets/logo.png","alt","logo","loading","lazy","width","180","height","180",1,"mb-4","rounded-pill"],[1,"form-signin",3,"ngSubmit"],[1,"form-label-group"],["type","text","id","userName","name","username","placeholder","Username","required","","autofocus","",1,"form-control",3,"ngModelChange","ngModel"],["for","userName"],["type","password","id","inputPassword","name","password","placeholder","Password","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","inputPassword"],["class","mb-3 text-danger",4,"ngIf"],["type","submit",1,"btn","btn-lg","btn-primary","me-2",3,"disabled"],[1,"mt-3"],["routerLink","../signup"],[1,"mb-3","text-danger"]],template:function(n,s){n&1&&(o(0,"div",0),M(1,"img",1),i(),o(2,"form",2),P("ngSubmit",function(){return s.login()}),o(3,"div",3)(4,"input",4),I("ngModelChange",function(_){return E(s.username,_)||(s.username=_),_}),i(),o(5,"label",5),a(6,"Username"),i()(),o(7,"div",3)(8,"input",6),I("ngModelChange",function(_){return E(s.password,_)||(s.password=_),_}),i(),o(9,"label",7),a(10,"Password"),i()(),d(11,Me,2,0,"div",8),o(12,"button",9),a(13," Sign in "),i(),o(14,"div",10),a(15," If you don't have an account, then please "),o(16,"a",11),a(17," Sign up "),i()()()),n&2&&(l(4),O("ngModel",s.username),l(4),O("ngModel",s.password),l(3),p("ngIf",s.loginError),l(),p("disabled",s.busy))},dependencies:[b,z,V,A,W,H,F,D,C],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:420px;padding:15px}.form-label-group[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.form-label-group[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{height:3.125rem;padding:.75rem}.form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:block;width:100%;margin-bottom:0;line-height:1.5;color:#495057;pointer-events:none;cursor:text;border:1px solid transparent;border-radius:.25rem;transition:all .1s ease-in-out}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:transparent}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:transparent}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:transparent}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:transparent}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:transparent}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown){padding-top:1.25rem;padding-bottom:.25rem}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) ~ label[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem;font-size:12px;color:#777}@supports (-ms-ime-align: auto){.form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:none}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:#777}}"]});let t=e;return t})();function xe(t,e){t&1&&(o(0,"div",14),a(1," Sign up failed. Please try again. "),i())}function ye(t,e){if(t&1){let m=L();o(0,"form",4),P("ngSubmit",function(){S(m);let n=f();return w(n.signup())}),o(1,"div",5)(2,"input",6),I("ngModelChange",function(n){S(m);let s=f();return E(s.username,n)||(s.username=n),w(n)}),i(),o(3,"label",7),a(4,"Username"),i()(),o(5,"div",5)(6,"input",8),I("ngModelChange",function(n){S(m);let s=f();return E(s.password,n)||(s.password=n),w(n)}),i(),o(7,"label",9),a(8,"Password"),i()(),d(9,xe,2,0,"div",10),o(10,"button",11),a(11," Sign Up "),i(),o(12,"div",12),a(13," If you don't have an account, then please "),o(14,"a",13),a(15," login "),i(),a(16," using your username and password "),i()()}if(t&2){let m=f();l(2),O("ngModel",m.username),l(4),O("ngModel",m.password),l(3),p("ngIf",m.loginError),l(),p("disabled",m.busy)}}function Se(t,e){t&1&&(o(0,"p",15),a(1,"Success!"),i(),o(2,"p"),a(3," You have signed up a new account. Please go to the "),o(4,"a",13),a(5," login "),i(),a(6," page to sign in the system. "),i())}var ge=(()=>{let e=class e{constructor(r){this.authService=r,this.busy=!1,this.username="",this.password="",this.loginError=!1,this.signupSuccess=!1}ngOnInit(){}signup(){!this.username||!this.password||(this.busy=!0,this.authService.signup(this.username.trim(),this.password).pipe(k(()=>this.busy=!1)).subscribe({next:()=>{this.signupSuccess=!0},error:()=>{this.signupSuccess=!1,this.loginError=!0}}))}};e.\u0275fac=function(n){return new(n||e)(u(g))},e.\u0275cmp=h({type:e,selectors:[["app-sign-up"]],decls:5,vars:2,consts:[["intro",""],[1,"text-center","mb-4"],["src","assets/logo.png","alt","logo","loading","lazy","width","180","height","180",1,"mb-4","rounded-pill"],["class","form-signin",3,"ngSubmit",4,"ngIf","ngIfElse"],[1,"form-signin",3,"ngSubmit"],[1,"form-label-group"],["type","text","id","userName","name","username","placeholder","Username","required","","autofocus","",1,"form-control",3,"ngModelChange","ngModel"],["for","userName"],["type","password","id","inputPassword","name","password","placeholder","Password","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","inputPassword"],["class","mb-3 text-danger",4,"ngIf"],["type","submit",1,"btn","btn-lg","btn-primary","me-2",3,"disabled"],[1,"mt-3"],["routerLink","../login"],[1,"mb-3","text-danger"],[1,"h2","text-success","fw-bold"]],template:function(n,s){if(n&1&&(o(0,"div",1),M(1,"img",2),i(),d(2,ye,17,4,"form",3)(3,Se,7,0,"ng-template",null,0,R)),n&2){let c=j(4);l(2),p("ngIf",!s.signupSuccess)("ngIfElse",c)}},dependencies:[b,z,V,A,W,H,F,D,C],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:420px;padding:15px}.form-label-group[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.form-label-group[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{height:3.125rem;padding:.75rem}.form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:block;width:100%;margin-bottom:0;line-height:1.5;color:#495057;pointer-events:none;cursor:text;border:1px solid transparent;border-radius:.25rem;transition:all .1s ease-in-out}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:transparent}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:transparent}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:transparent}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:transparent}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:transparent}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown){padding-top:1.25rem;padding-bottom:.25rem}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) ~ label[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem;font-size:12px;color:#777}@supports (-ms-ime-align: auto){.form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:none}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:#777}}"]});let t=e;return t})();var we=[{path:"",pathMatch:"full",component:ue,canMatch:[G]},{path:"login",component:de},{path:"signup",component:ge},{path:"events",loadChildren:()=>import("./chunk-BS46ZBAX.js").then(t=>t.EventsModule),canMatch:[G]},{path:"management",loadChildren:()=>import("./chunk-F2UCL72J.js").then(t=>t.ManagementModule),canMatch:[G]},{path:"**",redirectTo:""}],fe=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=y({type:e}),e.\u0275inj=x({imports:[K.forRoot(we),K]});let t=e;return t})();function Pe(t,e){if(t&1){let m=L();o(0,"button",12),P("click",function(){S(m);let n=f();return w(n.logout())}),a(1," Logout "),i()}}var he=(()=>{let e=class e{constructor(r){this.authService=r,this.username="",this.username=r.user.username}ngOnInit(){}logout(){this.authService.logout()}};e.\u0275fac=function(n){return new(n||e)(u(g))},e.\u0275cmp=h({type:e,selectors:[["app-root"]],decls:18,vars:1,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","px-3"],["routerLink","",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],["routerLinkActive","active",1,"nav-item"],["routerLink","events",1,"nav-link"],["routerLink","admin",1,"nav-link"],[1,"form-inline"],["class","btn btn-outline-success my-2 my-sm-0","type","button",3,"click",4,"ngIf"],[1,"d-flex","flex-column","flex-grow-1","h-100","w-100"],["type","button",1,"btn","btn-outline-success","my-2","my-sm-0",3,"click"]],template:function(n,s){n&1&&(o(0,"header")(1,"nav",0)(2,"a",1),a(3,"Event Planner"),i(),o(4,"button",2),M(5,"span",3),i(),o(6,"div",4)(7,"ul",5)(8,"li",6)(9,"a",7),a(10,"Events"),i()(),o(11,"li",6)(12,"a",8),a(13,"Admin"),i()()(),o(14,"div",9),d(15,Pe,2,0,"button",10),i()()()(),o(16,"main",11),M(17,"router-outlet"),i()),n&2&&(l(15),p("ngIf",s.username))},dependencies:[b,se,C,le],encapsulation:2});let t=e;return t})();var be=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=y({type:e,bootstrap:[he]}),e.\u0275inj=x({imports:[ie,re,ne,ce,fe]});let t=e;return t})();oe().bootstrapModule(be).catch(t=>console.error(t));
